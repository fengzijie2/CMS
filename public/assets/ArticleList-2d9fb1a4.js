import{a as c,o as _,c as E,b as e,w as a,e as m,t as f,g,H as h,a4 as y,bw as R,F as T,d as q,l as B,h as U,E as k}from"./index-d4928f24.js";import{E as $}from"./el-card-2a920598.js";import{f as A,a as H,e as M,g as N,h as P,c as F}from"./el-overlay-19620d0a.js";import"./el-input-8b980146.js";import{E as G}from"./el-row-84240930.js";import{g as I,d as J}from"./article-f741cf77.js";import{E as K}from"./el-dialog-9b126435.js";import{q as Q}from"./getQuitORConfirm-521e43e4.js";import"./event-9519ab40.js";import"./strings-87eb2823.js";const W=(s,l)=>{if(s.length>l)return s.substring(0,l)+"......"},X={class:"content"},Y=["innerHTML"],Z={__name:"ArticleDetail",props:["articleObj"],setup(s,{expose:l}){const u=c(!1);return l({openDialog(){u.value=!0}}),(v,p)=>{const r=y,b=K;return _(),E("div",null,[e(b,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=d=>u.value=d),width:"75%"},{header:a(()=>[m("h3",null,f(s.articleObj.title),1)]),footer:a(()=>[g(f(h(A)(s.articleObj.date)),1)]),default:a(()=>[m("div",X,[e(r,{height:"400px"},{default:a(()=>[m("div",{innerHTML:s.articleObj.content},null,8,Y)]),_:1})])]),_:1},8,["modelValue"])])}}},ee=["title"],pe={__name:"ArticleList",setup(s){const l=c({pageCode:1,pageSize:10,tag:""});R(()=>{r()});const u=c([]),v=c(0),p=c([]),r=async()=>{const{data:n}=await I(l.value);n.code===200&&(u.value=n.data,v.value=n.total,p.value=n.tagList)},b=n=>{Q(async()=>{const{data:o}=await J({_id:n._id});o.code===200?(k.success(o.msg),r()):k.error(o.msg)})},d=c(),x=c(),O=n=>{x.value=n,d.value.openDialog()};return(n,o)=>{const z=F,D=H,L=G,i=M,C=B,V=N,j=P,w=$;return _(),E("div",null,[e(w,null,{default:a(()=>[e(L,null,{default:a(()=>[e(D,{modelValue:l.value.tag,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value.tag=t),clearable:"",placeholder:"筛选标签",onChange:r},{default:a(()=>[(_(!0),E(T,null,q(p.value,t=>(_(),U(z,{key:t,value:t},null,8,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(V,{data:u.value,"max-height":"600",class:"class-table"},{default:a(()=>[e(i,{label:"文章标题",prop:"title"}),e(i,{label:"文章描述",prop:"description"}),e(i,{label:"文章标签",prop:"tag"}),e(i,{label:"作者",prop:"author"}),e(i,{label:"内容"},{default:a(({row:t})=>[m("span",{title:t.content},f(h(W)(t.content,10)),9,ee)]),_:1}),e(i,{label:"创建时间"},{default:a(({row:t})=>[g(f(h(A)(t.date)),1)]),_:1}),e(i,{label:"操作",width:"300",align:"center",fixed:"right"},{default:a(({row:t})=>[e(C,{onClick:S=>b(t)},{default:a(()=>[g("删除文章")]),_:2},1032,["onClick"]),e(C,{onClick:S=>O(t)},{default:a(()=>[g("查看文章")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(j,{"current-page":l.value.pageCode,"onUpdate:currentPage":o[1]||(o[1]=t=>l.value.pageCode=t),"page-size":l.value.pageSize,"onUpdate:pageSize":o[2]||(o[2]=t=>l.value.pageSize=t),onSizeChange:r,onCurrentChange:r,"page-sizes":[10,20,30,40],"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:v.value},null,8,["current-page","page-size","total"])]),_:1}),e(Z,{ref_key:"articleDetailRef",ref:d,articleObj:x.value},null,8,["articleObj"])])}}};export{pe as default};
